import { Parse5DomAdapter } from 'angular2/src/platform/server/parse5_adapter';
import { PostMessageBus, PostMessageBusSink, PostMessageBusSource } from 'angular2/src/web_workers/shared/post_message_bus';
import { genericWorkerAppProviders } from './worker_app_common';
var _postMessage = postMessage;
export function setupWebWorker(zone) {
    Parse5DomAdapter.makeCurrent();
    var sink = new PostMessageBusSink({
        postMessage: (message, transferrables) => { _postMessage(message, transferrables); }
    });
    var source = new PostMessageBusSource();
    var bus = new PostMessageBus(sink, source);
    return genericWorkerAppProviders(bus, zone);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyX2FwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFuZ3VsYXIyL3NyYy9wbGF0Zm9ybS93b3JrZXJfYXBwLnRzIl0sIm5hbWVzIjpbInNldHVwV2ViV29ya2VyIl0sIm1hcHBpbmdzIjoiT0FHTyxFQUFDLGdCQUFnQixFQUFDLE1BQU0sNkNBQTZDO09BQ3JFLEVBQ0wsY0FBYyxFQUNkLGtCQUFrQixFQUNsQixvQkFBb0IsRUFDckIsTUFBTSxrREFBa0Q7T0FDbEQsRUFBQyx5QkFBeUIsRUFBQyxNQUFNLHFCQUFxQjtBQU03RCxJQUFJLFlBQVksR0FBOEIsV0FBVyxDQUFDO0FBRTFELCtCQUErQixJQUFZO0lBQ3pDQSxnQkFBZ0JBLENBQUNBLFdBQVdBLEVBQUVBLENBQUNBO0lBQy9CQSxJQUFJQSxJQUFJQSxHQUFHQSxJQUFJQSxrQkFBa0JBLENBQUNBO1FBQ2hDQSxXQUFXQSxFQUNQQSxDQUFDQSxPQUFZQSxFQUFFQSxjQUE2QkEsT0FBT0EsWUFBWUEsQ0FBQ0EsT0FBT0EsRUFBRUEsY0FBY0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7S0FDaEdBLENBQUNBLENBQUNBO0lBQ0hBLElBQUlBLE1BQU1BLEdBQUdBLElBQUlBLG9CQUFvQkEsRUFBRUEsQ0FBQ0E7SUFDeENBLElBQUlBLEdBQUdBLEdBQUdBLElBQUlBLGNBQWNBLENBQUNBLElBQUlBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO0lBRTNDQSxNQUFNQSxDQUFDQSx5QkFBeUJBLENBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO0FBQzlDQSxDQUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Tmdab25lfSBmcm9tICdhbmd1bGFyMi9zcmMvY29yZS96b25lL25nX3pvbmUnO1xuaW1wb3J0IHtUeXBlLCBDT05TVF9FWFBSLCBpc1ByZXNlbnR9IGZyb20gJ2FuZ3VsYXIyL3NyYy9mYWNhZGUvbGFuZyc7XG5pbXBvcnQge1Byb3ZpZGVyfSBmcm9tICdhbmd1bGFyMi9zcmMvY29yZS9kaSc7XG5pbXBvcnQge1BhcnNlNURvbUFkYXB0ZXJ9IGZyb20gJ2FuZ3VsYXIyL3NyYy9wbGF0Zm9ybS9zZXJ2ZXIvcGFyc2U1X2FkYXB0ZXInO1xuaW1wb3J0IHtcbiAgUG9zdE1lc3NhZ2VCdXMsXG4gIFBvc3RNZXNzYWdlQnVzU2luayxcbiAgUG9zdE1lc3NhZ2VCdXNTb3VyY2Vcbn0gZnJvbSAnYW5ndWxhcjIvc3JjL3dlYl93b3JrZXJzL3NoYXJlZC9wb3N0X21lc3NhZ2VfYnVzJztcbmltcG9ydCB7Z2VuZXJpY1dvcmtlckFwcFByb3ZpZGVyc30gZnJvbSAnLi93b3JrZXJfYXBwX2NvbW1vbic7XG5cbi8vIFRPRE8oanRlcGxpdHo2MDIpIHJlbW92ZSB0aGlzIGFuZCBjb21waWxlIHdpdGggbGliLndlYndvcmtlci5kLnRzICgjMzQ5MilcbmludGVyZmFjZSBQb3N0TWVzc2FnZUludGVyZmFjZSB7XG4gIChtZXNzYWdlOiBhbnksIHRyYW5zZmVycmFibGVzPzpbQXJyYXlCdWZmZXJdKTogdm9pZDtcbn1cbnZhciBfcG9zdE1lc3NhZ2U6IFBvc3RNZXNzYWdlSW50ZXJmYWNlID0gPGFueT5wb3N0TWVzc2FnZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwV2ViV29ya2VyKHpvbmU6IE5nWm9uZSk6IFByb21pc2U8QXJyYXk8VHlwZSB8IFByb3ZpZGVyIHwgYW55W10+PiB7XG4gIFBhcnNlNURvbUFkYXB0ZXIubWFrZUN1cnJlbnQoKTtcbiAgdmFyIHNpbmsgPSBuZXcgUG9zdE1lc3NhZ2VCdXNTaW5rKHtcbiAgICBwb3N0TWVzc2FnZTpcbiAgICAgICAgKG1lc3NhZ2U6IGFueSwgdHJhbnNmZXJyYWJsZXM/OltBcnJheUJ1ZmZlcl0pID0+IHsgX3Bvc3RNZXNzYWdlKG1lc3NhZ2UsIHRyYW5zZmVycmFibGVzKTsgfVxuICB9KTtcbiAgdmFyIHNvdXJjZSA9IG5ldyBQb3N0TWVzc2FnZUJ1c1NvdXJjZSgpO1xuICB2YXIgYnVzID0gbmV3IFBvc3RNZXNzYWdlQnVzKHNpbmssIHNvdXJjZSk7XG5cbiAgcmV0dXJuIGdlbmVyaWNXb3JrZXJBcHBQcm92aWRlcnMoYnVzLCB6b25lKTtcbn1cbiJdfQ==