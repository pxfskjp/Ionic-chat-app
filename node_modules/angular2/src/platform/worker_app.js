'use strict';var parse5_adapter_1 = require('angular2/src/platform/server/parse5_adapter');
var post_message_bus_1 = require('angular2/src/web_workers/shared/post_message_bus');
var worker_app_common_1 = require('./worker_app_common');
var _postMessage = postMessage;
function setupWebWorker(zone) {
    parse5_adapter_1.Parse5DomAdapter.makeCurrent();
    var sink = new post_message_bus_1.PostMessageBusSink({
        postMessage: function (message, transferrables) { _postMessage(message, transferrables); }
    });
    var source = new post_message_bus_1.PostMessageBusSource();
    var bus = new post_message_bus_1.PostMessageBus(sink, source);
    return worker_app_common_1.genericWorkerAppProviders(bus, zone);
}
exports.setupWebWorker = setupWebWorker;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid29ya2VyX2FwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImFuZ3VsYXIyL3NyYy9wbGF0Zm9ybS93b3JrZXJfYXBwLnRzIl0sIm5hbWVzIjpbInNldHVwV2ViV29ya2VyIl0sIm1hcHBpbmdzIjoiQUFHQSwrQkFBK0IsNkNBQTZDLENBQUMsQ0FBQTtBQUM3RSxpQ0FJTyxrREFBa0QsQ0FBQyxDQUFBO0FBQzFELGtDQUF3QyxxQkFBcUIsQ0FBQyxDQUFBO0FBTTlELElBQUksWUFBWSxHQUE4QixXQUFXLENBQUM7QUFFMUQsd0JBQStCLElBQVk7SUFDekNBLGlDQUFnQkEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0E7SUFDL0JBLElBQUlBLElBQUlBLEdBQUdBLElBQUlBLHFDQUFrQkEsQ0FBQ0E7UUFDaENBLFdBQVdBLEVBQ1BBLFVBQUNBLE9BQVlBLEVBQUVBLGNBQTZCQSxJQUFPQSxZQUFZQSxDQUFDQSxPQUFPQSxFQUFFQSxjQUFjQSxDQUFDQSxDQUFDQSxDQUFDQSxDQUFDQTtLQUNoR0EsQ0FBQ0EsQ0FBQ0E7SUFDSEEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsdUNBQW9CQSxFQUFFQSxDQUFDQTtJQUN4Q0EsSUFBSUEsR0FBR0EsR0FBR0EsSUFBSUEsaUNBQWNBLENBQUNBLElBQUlBLEVBQUVBLE1BQU1BLENBQUNBLENBQUNBO0lBRTNDQSxNQUFNQSxDQUFDQSw2Q0FBeUJBLENBQUNBLEdBQUdBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO0FBQzlDQSxDQUFDQTtBQVZlLHNCQUFjLGlCQVU3QixDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtOZ1pvbmV9IGZyb20gJ2FuZ3VsYXIyL3NyYy9jb3JlL3pvbmUvbmdfem9uZSc7XG5pbXBvcnQge1R5cGUsIENPTlNUX0VYUFIsIGlzUHJlc2VudH0gZnJvbSAnYW5ndWxhcjIvc3JjL2ZhY2FkZS9sYW5nJztcbmltcG9ydCB7UHJvdmlkZXJ9IGZyb20gJ2FuZ3VsYXIyL3NyYy9jb3JlL2RpJztcbmltcG9ydCB7UGFyc2U1RG9tQWRhcHRlcn0gZnJvbSAnYW5ndWxhcjIvc3JjL3BsYXRmb3JtL3NlcnZlci9wYXJzZTVfYWRhcHRlcic7XG5pbXBvcnQge1xuICBQb3N0TWVzc2FnZUJ1cyxcbiAgUG9zdE1lc3NhZ2VCdXNTaW5rLFxuICBQb3N0TWVzc2FnZUJ1c1NvdXJjZVxufSBmcm9tICdhbmd1bGFyMi9zcmMvd2ViX3dvcmtlcnMvc2hhcmVkL3Bvc3RfbWVzc2FnZV9idXMnO1xuaW1wb3J0IHtnZW5lcmljV29ya2VyQXBwUHJvdmlkZXJzfSBmcm9tICcuL3dvcmtlcl9hcHBfY29tbW9uJztcblxuLy8gVE9ETyhqdGVwbGl0ejYwMikgcmVtb3ZlIHRoaXMgYW5kIGNvbXBpbGUgd2l0aCBsaWIud2Vid29ya2VyLmQudHMgKCMzNDkyKVxuaW50ZXJmYWNlIFBvc3RNZXNzYWdlSW50ZXJmYWNlIHtcbiAgKG1lc3NhZ2U6IGFueSwgdHJhbnNmZXJyYWJsZXM/OltBcnJheUJ1ZmZlcl0pOiB2b2lkO1xufVxudmFyIF9wb3N0TWVzc2FnZTogUG9zdE1lc3NhZ2VJbnRlcmZhY2UgPSA8YW55PnBvc3RNZXNzYWdlO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBXZWJXb3JrZXIoem9uZTogTmdab25lKTogUHJvbWlzZTxBcnJheTxUeXBlIHwgUHJvdmlkZXIgfCBhbnlbXT4+IHtcbiAgUGFyc2U1RG9tQWRhcHRlci5tYWtlQ3VycmVudCgpO1xuICB2YXIgc2luayA9IG5ldyBQb3N0TWVzc2FnZUJ1c1Npbmsoe1xuICAgIHBvc3RNZXNzYWdlOlxuICAgICAgICAobWVzc2FnZTogYW55LCB0cmFuc2ZlcnJhYmxlcz86W0FycmF5QnVmZmVyXSkgPT4geyBfcG9zdE1lc3NhZ2UobWVzc2FnZSwgdHJhbnNmZXJyYWJsZXMpOyB9XG4gIH0pO1xuICB2YXIgc291cmNlID0gbmV3IFBvc3RNZXNzYWdlQnVzU291cmNlKCk7XG4gIHZhciBidXMgPSBuZXcgUG9zdE1lc3NhZ2VCdXMoc2luaywgc291cmNlKTtcblxuICByZXR1cm4gZ2VuZXJpY1dvcmtlckFwcFByb3ZpZGVycyhidXMsIHpvbmUpO1xufVxuIl19